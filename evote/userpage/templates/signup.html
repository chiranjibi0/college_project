{% extends 'layout.html' %}
{% load static %}

{% block title %}
  <title>Signup - e-Vote Campus</title>
{% endblock %}

{% block content %}
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
  <div class="container d-flex justify-content-between align-items-center">
    <a class="navbar-brand" href="{% url 'index' %}">
      <span id="logo-text">e-Vote</span>
    </a>
    <div>
      <a href="{% url 'login' %}" class="btn btn-light me-2">login</a>
    </div>
  </div>
</nav>



<main>
  <div class="form-container ">
    <h1 class="text-center form-heading">
      <span class="logo-e">e</span><span class="logo-rest">-Vote</span>
    </h1>

    

    <form method="post" id="signupForm"  novalidate  >
      {% csrf_token %}
      <div class="row g-3">
        <div class="col-md-6">
          <label class="form-label"><i class="fas fa-phone"></i>Phone Number *</label>
          <input type="tel" class="form-control" id="phone" name="phone" placeholder="Enter phone number" required>
        </div>

        <div class="col-md-6">
          <label class="form-label"><i class="fas fa-envelope"></i>Email</label>
          <input type="email" class="form-control" id="email" name="email" placeholder="Enter email">
        </div>

        <div class="col-md-6">
          <label class="form-label"><i class="fas fa-lock"></i>Password *</label>
          <input type="password" class="form-control" id="password" name="password1" placeholder="Enter password" required>
        </div>

        <div class="col-md-6">
          <label class="form-label"><i class="fas fa-lock"></i>Re-enter Password *</label>
          <input type="password" class="form-control" id="repassword" name="password2" placeholder="Re-enter password" required>
        </div>

        <div class="col-md-6">
          <label class="form-label"><i class="fas fa-calendar"></i>Age *</label>
          <input type="number" class="form-control" id="age" name="age" placeholder="Enter age" min="0" required>
        </div>

        <div class="col-md-6">
          <label class="form-label"><i class="fas fa-user-plus"></i>User Type *</label>
          <select class="form-select" id="type" name="user_type" required>
            <option value="">Select type</option>
            <option value="admin">Admin</option>
            <option value="candidate">Candidate</option>
            <option value="voter">Voter</option>
          </select>
        </div>
      </div>

      <button type="submit" class="btn btn-custom w-100 mt-3"><i class="fas fa-user-plus"></i> Signup</button>
      <p class="mt-3 text-center">Already have an account? <a href="{% url 'login' %}">Login</a></p>
    </form>
  </div>
</main>
{% endblock %}

{% block extra_js %}
<script>
  document.getElementById("signupForm").addEventListener("submit", function (event) {
    const phone = document.getElementById("phone").value.trim();
    const password = document.getElementById("password").value.trim();
    const repassword = document.getElementById("repassword").value.trim();
    const age = Number(document.getElementById("age").value.trim());
    const type = document.getElementById("type").value;

    if (phone.length < 10) {
      event.preventDefault();
      alert("Phone number must be at least 10 digits");
      return;
    }
    if (password.length < 8) {
      event.preventDefault();
      alert("Password must be at least 8 characters");
      return;
    }
    if (password !== repassword) {
      event.preventDefault();
      alert("Passwords do not match");
      return;
    }
    if (!Number.isInteger(age) || age < 18) {
      event.preventDefault();
      alert("You must be at least 18 years old");
      return;
    }
    if (type === "") {
      event.preventDefault();
      alert("Please select user type");
      return;
    }
  });
</script>
{% endblock %}
