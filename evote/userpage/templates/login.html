{% extends 'layout.html' %}
{% load static %}

{% block title %}
  <title>Login - e-Vote Campus</title>
{% endblock %}
{% block navbar%}
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
  <div class="container d-flex justify-content-between align-items-center">
    <a class="navbar-brand" href="{% url 'index' %}">
      <span id="logo-text">e-Vote</span>
    </a>
    <div>
      <a href="{% url 'signup' %}" class="btn btn-light me-2">Signup</a>
    </div>
  </div>
</nav>
{% endblock %}

{% block content %}
<section class="container d-flex justify-content-center align-items-center" style="min-height:70vh;">
  <div class="form-container mt-3">
    <h1 class="text-center mb-4 logo-heading">
      <span class="logo-e">e</span><span class="logo-rest">-Vote</span>
    </h1>

    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }} small mb-3">{{ message }}</div>
      {% endfor %}
    {% endif %}

    <form method="post" id="loginForm" novalidate>
      {% csrf_token %}
      <div class="mb-3">
        <label for="id_type" class="form-label">User Type</label>
        <select class="form-select" id="id_type" name="user_type" required>
          <option value="">Select Your Type</option>
          <option value="admin">Admin</option>
          <option value="candidate">Candidate</option>
          <option value="voter">Voter</option>
        </select>
      </div>

      <div class="mb-3">
        <label for="id_phone" class="form-label"><i class="fas fa-phone"></i> Phone Number</label>
        <input type="tel" class="form-control" id="id_phone" name="phone" placeholder="Enter Number" required>
      </div>

      <div class="mb-3 icon-input">
        <label for="id_password" class="form-label"><i class="fas fa-lock"></i> Password</label>
        <input type="password" class="form-control" id="id_password" name="password" placeholder="Enter your password" required>
      </div>

      <button type="submit" class="btn btn-custom w-100">Login</button>
      <p class="mt-3 text-center">Don't have an account? <a href="{% url 'signup' %}">Sign up</a></p>
    </form>
  </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
  document.getElementById("loginForm").addEventListener("submit", function(event){
    const phone = document.getElementById("id_phone").value.trim();
    const password = document.getElementById("id_password").value.trim();

    if(phone.length < 10){
      event.preventDefault();
      alert("Phone number must be at least 10 digits");
      return;
    }
    if(password.length < 8){
      event.preventDefault();
      alert("Password must be at least 8 characters");
      return;
    }
  });
</script>
{% endblock %}
